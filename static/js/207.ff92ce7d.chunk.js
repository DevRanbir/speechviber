"use strict";(self.webpackChunkspeechviber=self.webpackChunkspeechviber||[]).push([[207],{3207:(e,i,t)=>{t.r(i),t.d(i,{default:()=>ae});var r=t(9950),s=t(4142),o=t(9808),l=t(6491),n=t(5333),a=t(2053),c=t(2235),d=t(2236),x=t(9254),h=t(8429),m=t(9335),p=t(2578),u=t(3189),A=t(937),f=t(9698),j=t(2375),y=t(4857),g=t(6589),b=t(7191),v=t(899),w=t(8089),S=t(704),$=t(7869),C=t(5277),D=t(4745),P=t(6639),W=t(4447),I=t(3174),E=t(8307),k=t(7999),T=t(8945),O=t(9092),F=t(2871),z=t(5010),M=t(1334),G=t(1940),N=t(8691),R=t(495),L=t(4414);const H=[{id:"mcq",label:"MCQ Challenge",icon:k.A,color:"#3f51b5"},{id:"vocabulary",label:"Word Power",icon:A.A,color:"#009688"},{id:"grammar",label:"Grammar Check",icon:T.A,color:"#f44336"},{id:"tongueTwister",label:"Tongue Twister",icon:O.A,color:"#ff9800"},{id:"wordContext",label:"Word in Context",icon:F.A,color:"#2196f3"},{id:"grammarFill",label:"Grammar Fill",icon:k.A,color:"#9c27b0"}],q={mcq:k.A,vocabulary:A.A,grammar:T.A,tongueTwister:O.A,wordContext:F.A,grammarFill:k.A},B={mcq:"#3f51b5",vocabulary:"#009688",grammar:"#f44336",tongueTwister:"#ff9800",wordContext:"#2196f3",grammarFill:"#4caf50"},V=()=>{const[e,i]=(0,r.useState)("all"),[t,x]=(0,r.useState)([]),[h,u]=(0,r.useState)("grid"),[f,j]=(0,r.useState)(!0),{currentUser:T}=(0,m.As)(),O=(0,y.A)(),F=(0,g.A)(O.breakpoints.down("sm"));(0,r.useEffect)((()=>{if(!T)return void j(!1);j(!0);const e=(0,p.C3)(),i=(0,p.KR)(e,`users/${T.uid}`),t=(0,p.Zy)(i,(e=>{const i=e.val();if(!i)return x([]),void j(!1);const t=[];i["mcq-challenges"]&&Object.entries(i["mcq-challenges"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`mcq-${i}`,type:"mcq",title:`MCQ Challenge - ${e.jobRole}`,timestamp:e.time,score:`${e.score}%`,rawScore:e.score,chips:[`Difficulty: ${e.difficulty}`,`Questions: ${e.attemptedQuestions}`]})}))})),i["word-power"]&&Object.entries(i["word-power"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`vocab-${i}`,type:"vocabulary",title:"Word Power Challenge",timestamp:e.time,score:`${e.score}%`,rawScore:e.score,chips:[`Difficulty: ${e.difficulty}`,`Questions: ${e.attemptedQuestions}`]})}))})),i["grammar-check"]&&Object.entries(i["grammar-check"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`grammar-${i}`,type:"grammar",title:"Grammar Check",timestamp:e.time,score:`${e.grammarScore}%`,rawScore:e.grammarScore,chips:[`Structure: ${e.structureScore}%`,`Punctuation: ${e.punctuationScore}%`]})}))})),i["tongue-twister"]&&Object.entries(i["tongue-twister"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`tongue-${i}`,type:"tongueTwister",title:"Tongue Twister Challenge",timestamp:e.time,score:`${e.score}%`,rawScore:e.score,chips:[`Accuracy: ${e.accuracy}%`,`Type: ${e.questionType}`,e.timerEnabled?`Time: ${e.timeLimit}s`:"No Timer"]})}))})),i["word-context"]&&Object.entries(i["word-context"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`context-${i}`,type:"wordContext",title:"Word Context Challenge",timestamp:e.time,score:`${e.score}%`,rawScore:e.score,chips:[`Accuracy: ${e.accuracy}%`,`Difficulty: ${e.difficulty}`,e.timerEnabled?`Time: ${e.timeLimit}s`:"No Timer"]})}))})),i["grammar-fill"]&&Object.entries(i["grammar-fill"]).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`fill-${i}`,type:"grammarFill",title:`Grammar Fill - ${e.topic}`,timestamp:e.time,score:`${e.score}%`,rawScore:e.score,chips:[`Accuracy: ${e.accuracy}%`,`Difficulty: ${e.difficulty}`,e.timerEnabled?`Time: ${e.timeLimit}s`:"No Timer"]})}))})),t.sort(((e,i)=>new Date(i.timestamp)-new Date(e.timestamp))),x(t),j(!1)}));return()=>t()}),[T]);const V="all"===e?t:t.filter((i=>i.type===e)),Q={};H.forEach((e=>{Q[e.id]=t.filter((i=>i.type===e.id)).length}));const Y=V.length>0?Math.max(...V.map((e=>e.rawScore||0))):0,U=V.length>0?Math.round(V.reduce(((e,i)=>e+(i.rawScore||0)),0)/V.length):0;return(0,L.jsxs)(o.A,{maxWidth:"lg",sx:{py:3},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,L.jsx)(a.A,{variant:"h5",sx:{fontWeight:"bold"},children:"My Learning Journey"}),(0,L.jsx)(l.A,{children:(0,L.jsx)($.A,{title:"grid"===h?"List View":"Grid View",children:(0,L.jsx)(n.A,{onClick:()=>{u((e=>"grid"===e?"list":"grid"))},color:"primary",children:"grid"===h?(0,L.jsx)(z.A,{}):(0,L.jsx)(M.A,{})})})})]}),f?(0,L.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,L.jsx)(P.A,{})}):(0,L.jsx)(L.Fragment,{children:t.length>0?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(v.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:O.palette.primary.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Total Activities"}),(0,L.jsx)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:t.length})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:O.palette.success.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Highest Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[Y,"%"]})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:O.palette.warning.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Average Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[U,"%"]})]})})})]}),(0,L.jsx)(c.A,{elevation:3,sx:{mb:3,borderRadius:"8px",overflow:"hidden"},children:(0,L.jsxs)(d.A,{value:e,onChange:(e,t)=>{i(t)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:"medium"}},children:[(0,L.jsx)(s.A,{label:"All Activities",value:"all",icon:(0,L.jsx)(A.A,{}),iconPosition:"start",sx:{py:1.5},wrapped:!0}),H.map((e=>{const i=Q[e.id]||0;return i>0?(0,L.jsx)(W.A,{badgeContent:i,color:"secondary",children:(0,L.jsx)(s.A,{label:e.label,value:e.id,icon:(0,L.jsx)(e.icon,{}),iconPosition:"start",wrapped:!0,sx:{py:1.5}})},e.id):(0,L.jsx)(s.A,{label:e.label,value:e.id,icon:(0,L.jsx)(e.icon,{}),iconPosition:"start",wrapped:!0,sx:{py:1.5}},e.id)}))]})}),(0,L.jsx)(v.Ay,{container:!0,spacing:3,children:V.map((e=>(e=>{const i=q[e.type]||k.A,t=B[e.type]||O.palette.primary.main,r=e.rawScore===Y&&Y>0;return"list"===h?(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,children:(0,L.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-2px)",transition:"all 0.3s ease"},borderLeft:`5px solid ${t}`},children:(0,L.jsxs)(S.A,{sx:{display:"flex",width:"100%",py:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",width:F?"100%":"30%",mb:F?1:0},children:[(0,L.jsx)(i,{sx:{mr:1,color:t}}),(0,L.jsxs)(a.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:[e.title,r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{ml:1,color:"#FFD700",fontSize:"0.9rem"}})})]})]}),!F&&(0,L.jsx)(a.A,{color:"textSecondary",sx:{width:"20%"},children:(0,E.GP)(new Date(e.timestamp),"PPp")}),(0,L.jsxs)(l.A,{sx:{display:"flex",flexDirection:F?"column":"row",alignItems:F?"flex-start":"center",width:F?"100%":"50%",mt:F?1:0},children:[(0,L.jsxs)(a.A,{variant:"body2",sx:{mr:2,fontWeight:"bold",color:r?O.palette.success.main:"inherit"},children:["Score: ",e.score||"N/A"]}),F&&(0,L.jsx)(a.A,{variant:"caption",color:"textSecondary",sx:{mb:1},children:(0,E.GP)(new Date(e.timestamp),"PPp")}),e.chips&&(0,L.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})})},e.id)}):(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsxs)(w.A,{sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-4px)",transition:"all 0.3s ease"},position:"relative",overflow:"visible"},children:[r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{position:"absolute",top:-10,right:-10,color:"#FFD700",backgroundColor:"white",borderRadius:"50%",padding:"2px",boxShadow:2}})}),(0,L.jsxs)(l.A,{sx:{bgcolor:t,color:"white",p:2,display:"flex",alignItems:"center"},children:[(0,L.jsx)(i,{sx:{mr:1}}),(0,L.jsx)(a.A,{variant:"h6",sx:{fontWeight:"medium",flexGrow:1},children:e.title})]}),(0,L.jsxs)(S.A,{sx:{flexGrow:1,pt:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,L.jsx)(N.A,{sx:{fontSize:"0.9rem",mr:1,color:"text.secondary"}}),(0,L.jsx)(a.A,{variant:"body2",color:"textSecondary",children:(0,E.GP)(new Date(e.timestamp),"PPp")})]}),(0,L.jsx)(D.A,{sx:{my:1}}),(0,L.jsxs)(l.A,{sx:{mt:2},children:[(0,L.jsxs)(a.A,{variant:"body1",sx:{fontWeight:"bold",display:"flex",alignItems:"center",color:r?O.palette.success.main:"inherit"},children:[(0,L.jsx)(R.A,{sx:{mr:.5,fontSize:"1.1rem"}}),"Score: ",e.score||"N/A"]}),e.chips&&(0,L.jsx)(l.A,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})]})},e.id)})})(e)))})]}):(0,L.jsx)(I.A,{severity:"info",variant:"outlined",sx:{p:3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(a.A,{children:"No textual learning activities found. Start practicing to see your progress!"})})})]})};var Q=t(6676),Y=t(6547),U=t(9235),Z=t(6634),K=t(7246);const J=[{id:"speech",label:"Speech Practice",icon:Q.A,color:"#3f51b5"},{id:"debate",label:"Debate Mode",icon:Y.A,color:"#009688"},{id:"story",label:"Story Time",icon:U.A,color:"#f44336"},{id:"publicSpeaking",label:"Public Speaking",icon:Z.A,color:"#ff9800"},{id:"wordCircumlocution",label:"Word Wizardry",icon:O.A,color:"#2196f3"},{id:"speechPrecision",label:"Speech Precision",icon:f.A,color:"#9c27b0"}],X={speech:Q.A,debate:Y.A,story:U.A,publicSpeaking:Z.A,wordCircumlocution:O.A,speechPrecision:f.A},_={speech:"#3f51b5",debate:"#009688",story:"#f44336",publicSpeaking:"#ff9800",wordCircumlocution:"#2196f3",speechPrecision:"#9c27b0"},ee=()=>{const[e,i]=(0,r.useState)("all"),[t,x]=(0,r.useState)([]),[h,u]=(0,r.useState)("grid"),[A,f]=(0,r.useState)(!0),{currentUser:j}=(0,m.As)(),k=(0,y.A)(),T=(0,g.A)(k.breakpoints.down("sm"));(0,r.useEffect)((()=>{if(!j)return void f(!1);f(!0);const e=(0,p.C3)(),i=(0,p.KR)(e,`users/${j.uid}`),t=(0,p.Zy)(i,(e=>{const i=e.val();if(!i)return x([]),void f(!1);const t=[];i.fasttractanalysis&&Object.entries(i.fasttractanalysis).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`speech-${i}`,type:"speech",title:"Fast Track Analysis",timestamp:e.time,score:`${e.averageScore}%`,rawScore:e.averageScore,duration:e.duration||"N/A",chips:e.questionScores?e.questionScores.map((e=>`Q${e.question}: ${e.score}%`)):[]})}))})),i.debate&&Object.entries(i.debate).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`debate-${i}`,type:"debate",title:`Debate: ${e.topic}`,timestamp:e.time,score:`${e.score}%`,rawScore:e.score,duration:e.duration||"N/A",chips:[`Result: ${e.result}`,`Difficulty: ${e.difficulty}`,`Position: ${e.position}`]})}))})),i.storymode&&Object.entries(i.storymode).forEach((e=>{let[i,r]=e;Object.values(r).forEach((e=>{t.push({id:`story-${i}`,type:"story",title:"Story Time Analysis",timestamp:e.time,score:`${e.score}%`,rawScore:e.score,duration:e.duration||"N/A",chips:[e.book?`Book: ${e.book}`:"Custom Story",e.difficulty?`Difficulty: ${e.difficulty}`:""].filter((e=>e))})}))})),i["public-speaking"]&&Object.entries(i["public-speaking"]).forEach((e=>{var i,r;let[s,o]=e;t.push({id:`publicSpeaking-${s}`,type:"publicSpeaking",title:`Speech: ${o.topic}`,timestamp:o.timestamp,duration:o.duration||"N/A",score:`${(null===(i=o.scores)||void 0===i?void 0:i.overall)||0}%`,rawScore:(null===(r=o.scores)||void 0===r?void 0:r.overall)||0,chips:[`Type: ${o.speechType}`,`Difficulty: ${o.difficulty}`]})})),i["word-wizardry"]&&Object.entries(i["word-wizardry"]).forEach((e=>{var i,r;let[s,o]=e;t.push({id:`wordCircumlocution-${s}`,type:"wordCircumlocution",title:`Word: ${o.word}`,timestamp:o.timestamp,duration:o.duration||"N/A",score:`${(null===(i=o.scores)||void 0===i?void 0:i.overall)||0}%`,rawScore:(null===(r=o.scores)||void 0===r?void 0:r.overall)||0,chips:[`Category: ${o.category}`,`Difficulty: ${o.difficulty}`]})})),i["pronunciation-pro"]&&Object.entries(i["pronunciation-pro"]).forEach((e=>{var i,r;let[s,o]=e;t.push({id:`speechPrecision-${s}`,type:"speechPrecision",title:`Focus: ${o.focus}`,timestamp:o.timestamp,duration:o.duration||"N/A",score:`${(null===(i=o.scores)||void 0===i?void 0:i.overall)||0}%`,rawScore:(null===(r=o.scores)||void 0===r?void 0:r.overall)||0,chips:[`Category: ${o.category}`,`Difficulty: ${o.difficulty}`]})})),t.sort(((e,i)=>new Date(i.timestamp)-new Date(e.timestamp))),x(t),f(!1)}));return()=>t()}),[j]);const O="all"===e?t:t.filter((i=>i.type===e)),F={};J.forEach((e=>{F[e.id]=t.filter((i=>i.type===e.id)).length}));const H=O.length>0?Math.max(...O.map((e=>e.rawScore||0))):0,q=O.length>0?Math.round(O.reduce(((e,i)=>e+(i.rawScore||0)),0)/O.length):0;return(0,L.jsxs)(o.A,{maxWidth:"lg",sx:{py:3},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,L.jsx)(a.A,{variant:"h5",sx:{fontWeight:"bold"},children:"My Audio Practice Journey"}),(0,L.jsx)(l.A,{children:(0,L.jsx)($.A,{title:"grid"===h?"List View":"Grid View",children:(0,L.jsx)(n.A,{onClick:()=>{u((e=>"grid"===e?"list":"grid"))},color:"primary",children:"grid"===h?(0,L.jsx)(z.A,{}):(0,L.jsx)(M.A,{})})})})]}),A?(0,L.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,L.jsx)(P.A,{})}):(0,L.jsx)(L.Fragment,{children:t.length>0?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(v.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.primary.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Total Activities"}),(0,L.jsx)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:t.length})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.success.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Highest Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[H,"%"]})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.warning.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Average Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[q,"%"]})]})})})]}),(0,L.jsx)(c.A,{elevation:3,sx:{mb:3,borderRadius:"8px",overflow:"hidden"},children:(0,L.jsxs)(d.A,{value:e,onChange:(e,t)=>{i(t)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:"medium"}},children:[(0,L.jsx)(s.A,{label:"All Activities",value:"all",icon:(0,L.jsx)(Q.A,{}),iconPosition:"start",sx:{py:1.5},wrapped:!0}),J.map((e=>(0,L.jsx)(s.A,{label:(0,L.jsx)(W.A,{badgeContent:F[e.id]||null,color:"secondary",children:(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,L.jsx)(e.icon,{sx:{mr:1}}),e.label]})}),value:e.id,wrapped:!0,sx:{py:1.5}},e.id)))]})}),(0,L.jsx)(v.Ay,{container:!0,spacing:3,children:O.map((e=>(e=>{const i=X[e.type]||Q.A,t=_[e.type]||k.palette.primary.main,r=e.rawScore===H&&H>0,s=e=>{try{const i=new Date(e);return isNaN(i.getTime())?"Invalid Date":(0,E.GP)(i,"PPp")}catch(i){return console.error("Date formatting error:",i),"Invalid Date"}};return"list"===h?(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,children:(0,L.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-2px)",transition:"all 0.3s ease"},borderLeft:`5px solid ${t}`},children:(0,L.jsxs)(S.A,{sx:{display:"flex",width:"100%",py:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",width:T?"100%":"30%",mb:T?1:0},children:[(0,L.jsx)(i,{sx:{mr:1,color:t}}),(0,L.jsxs)(a.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:[e.title,r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{ml:1,color:"#FFD700",fontSize:"0.9rem"}})})]})]}),!T&&(0,L.jsx)(a.A,{color:"textSecondary",sx:{width:"20%"},children:s(e.timestamp)}),(0,L.jsxs)(l.A,{sx:{display:"flex",flexDirection:T?"column":"row",alignItems:T?"flex-start":"center",width:T?"100%":"50%",mt:T?1:0},children:[(0,L.jsxs)(a.A,{variant:"body2",sx:{mr:2,fontWeight:"bold",color:r?k.palette.success.main:"inherit"},children:["Score: ",e.score||"N/A"]}),(0,L.jsxs)(a.A,{variant:"body2",color:"textSecondary",sx:{mr:2},children:[(0,L.jsx)(K.A,{sx:{fontSize:"0.9rem",mr:.5,verticalAlign:"middle"}}),e.duration,"s"]}),T&&(0,L.jsx)(a.A,{variant:"caption",color:"textSecondary",sx:{mb:1},children:s(e.timestamp)}),e.chips&&(0,L.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})})},e.id)}):(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsxs)(w.A,{sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-4px)",transition:"all 0.3s ease"},position:"relative",overflow:"visible"},children:[r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{position:"absolute",top:-10,right:-10,color:"#FFD700",backgroundColor:"white",borderRadius:"50%",padding:"2px",boxShadow:2}})}),(0,L.jsxs)(l.A,{sx:{bgcolor:t,color:"white",p:2,display:"flex",alignItems:"center"},children:[(0,L.jsx)(i,{sx:{mr:1}}),(0,L.jsx)(a.A,{variant:"h6",sx:{fontWeight:"medium",flexGrow:1},children:e.title})]}),(0,L.jsxs)(S.A,{sx:{flexGrow:1,pt:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,L.jsx)(N.A,{sx:{fontSize:"0.9rem",mr:1,color:"text.secondary"}}),(0,L.jsx)(a.A,{variant:"body2",color:"textSecondary",children:s(e.timestamp)})]}),(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,L.jsx)(K.A,{sx:{fontSize:"0.9rem",mr:1,color:"text.secondary"}}),(0,L.jsxs)(a.A,{variant:"body2",color:"textSecondary",children:["Duration: ",e.duration,"s"]})]}),(0,L.jsx)(D.A,{sx:{my:1}}),(0,L.jsxs)(l.A,{sx:{mt:2},children:[(0,L.jsxs)(a.A,{variant:"body1",sx:{fontWeight:"bold",display:"flex",alignItems:"center",color:r?k.palette.success.main:"inherit"},children:[(0,L.jsx)(R.A,{sx:{mr:.5,fontSize:"1.1rem"}}),"Score: ",e.score||"N/A"]}),e.chips&&(0,L.jsx)(l.A,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})]})},e.id)})})(e)))})]}):(0,L.jsx)(I.A,{severity:"info",variant:"outlined",sx:{p:3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(a.A,{children:"No audio practice activities found. Start practicing to see your progress!"})})})]})};var ie=t(1285),te=t(6983);const re=[{id:"IRA",label:"Interview Readiness Analyzer",icon:Z.A,color:"#3f51b5"},{id:"expressionMatcher",label:"Expression Matcher",icon:ie.A,color:"#009688"},{id:"full",label:"Full Mode",icon:te.A,color:"#f44336"}],se={IRA:Z.A,expressionMatcher:ie.A,full:te.A},oe={IRA:"#3f51b5",expressionMatcher:"#009688",full:"#f44336"},le=()=>{const[e,i]=(0,r.useState)("all"),[t,x]=(0,r.useState)([]),[h,u]=(0,r.useState)("grid"),[A,f]=(0,r.useState)(!0),{currentUser:j}=(0,m.As)(),k=(0,y.A)(),T=(0,g.A)(k.breakpoints.down("sm"));(0,r.useEffect)((()=>{if(!j)return void f(!1);f(!0);const e=(0,p.C3)(),i=(0,p.KR)(e,`users/${j.uid}`),t=(0,p.Zy)(i,(e=>{const i=e.val();if(!i)return x([]),void f(!1);const t=[];i["interview-readiness"]&&Object.entries(i["interview-readiness"]).forEach((e=>{let[i,r]=e;t.push({id:i,type:"IRA",title:"Interview Readiness Analysis",timestamp:r.timestamp,score:r.score,rawScore:parseInt(r.score)||0,chips:[`Professional: ${r.professionalAppearance}%`,`Expression: ${r.facialExpression}%`,`Body Language: ${r.bodyLanguage}%`,`Overall: ${r.overallPresentation}%`]})})),i["custom-interview-analysis"]&&Object.entries(i["custom-interview-analysis"]).forEach((e=>{let[i,r]=e;const s=Object.entries(r).filter((e=>{let[i]=e;return!["timestamp","imageUrl","createdAt","overallScore"].includes(i)})).map((e=>{let[i,t]=e;return`${i}: ${"number"===typeof t?t+"%":t}`}));t.push({id:i,type:"expressionMatcher",title:"Custom Interview Analysis",timestamp:r.timestamp,score:r.overallScore,rawScore:parseInt(r.overallScore)||0,chips:s})})),i.interviews&&i.interviews.scores&&Object.entries(i.interviews.scores).forEach((e=>{let[i,r]=e;r&&t.push({id:i,type:"full",title:`Interview for ${r.jobRole||"Game tester"} at ${r.company||"Mogang"}`,timestamp:r.createdAt,score:r.overallScore,rawScore:parseInt(r.overallScore)||0,chips:[`Communication: ${r.communication}`,`Technical: ${r.technical}`,`Cultural: ${r.cultural}`,`Confidence: ${r.confidence}`,`Image Analysis: ${r.imageAnalysis}`].map((e=>`${e}%`))})})),t.sort(((e,i)=>new Date(i.timestamp)-new Date(e.timestamp))),x(t),f(!1)}));return()=>t()}),[j]);const O="all"===e?t:t.filter((i=>i.type===e)),F={};re.forEach((e=>{F[e.id]=t.filter((i=>i.type===e.id)).length}));const H=O.length>0?Math.max(...O.map((e=>e.rawScore||0))):0,q=O.length>0?Math.round(O.reduce(((e,i)=>e+(i.rawScore||0)),0)/O.length):0;return(0,L.jsxs)(o.A,{maxWidth:"lg",sx:{py:3},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,L.jsx)(a.A,{variant:"h5",sx:{fontWeight:"bold"},children:"Visual Learning Journey"}),(0,L.jsx)(l.A,{children:(0,L.jsx)($.A,{title:"grid"===h?"List View":"Grid View",children:(0,L.jsx)(n.A,{onClick:()=>{u((e=>"grid"===e?"list":"grid"))},color:"primary",children:"grid"===h?(0,L.jsx)(z.A,{}):(0,L.jsx)(M.A,{})})})})]}),A?(0,L.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,L.jsx)(P.A,{})}):(0,L.jsx)(L.Fragment,{children:t.length>0?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(v.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.primary.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Total Activities"}),(0,L.jsx)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:t.length})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.success.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Highest Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[H,"%"]})]})})}),(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:4,children:(0,L.jsx)(w.A,{sx:{bgcolor:k.palette.warning.main,color:"white"},children:(0,L.jsxs)(S.A,{children:[(0,L.jsx)(a.A,{variant:"h6",children:"Average Score"}),(0,L.jsxs)(a.A,{variant:"h3",sx:{fontWeight:"bold"},children:[q,"%"]})]})})})]}),(0,L.jsx)(c.A,{elevation:3,sx:{mb:3,borderRadius:"8px",overflow:"hidden"},children:(0,L.jsxs)(d.A,{value:e,onChange:(e,t)=>{i(t)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:"medium"}},children:[(0,L.jsx)(s.A,{label:"All Activities",value:"all",icon:(0,L.jsx)(Z.A,{}),iconPosition:"start",sx:{py:1.5},wrapped:!0}),re.map((e=>(0,L.jsx)(s.A,{label:e.label,value:e.id,icon:(0,L.jsx)(e.icon,{}),iconPosition:"start",wrapped:!0,sx:{py:1.5},component:F[e.id]>0?W.A:"div",badgeContent:F[e.id]||null,color:"secondary"},e.id)))]})}),(0,L.jsx)(v.Ay,{container:!0,spacing:3,children:O.map((e=>(e=>{const i=se[e.type]||Z.A,t=oe[e.type]||k.palette.primary.main,r=e.rawScore===H&&H>0;return"list"===h?(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,children:(0,L.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-2px)",transition:"all 0.3s ease"},borderLeft:`5px solid ${t}`},children:(0,L.jsxs)(S.A,{sx:{display:"flex",width:"100%",py:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",width:T?"100%":"30%",mb:T?1:0},children:[(0,L.jsx)(i,{sx:{mr:1,color:t}}),(0,L.jsxs)(a.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:[e.title,r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{ml:1,color:"#FFD700",fontSize:"0.9rem"}})})]})]}),!T&&(0,L.jsx)(a.A,{color:"textSecondary",sx:{width:"20%"},children:(0,E.GP)(new Date(e.timestamp),"PPp")}),(0,L.jsxs)(l.A,{sx:{display:"flex",flexDirection:T?"column":"row",alignItems:T?"flex-start":"center",width:T?"100%":"50%",mt:T?1:0},children:[(0,L.jsxs)(a.A,{variant:"body2",sx:{mr:2,fontWeight:"bold",color:r?k.palette.success.main:"inherit"},children:["Score: ",e.score||"N/A","%"]}),T&&(0,L.jsx)(a.A,{variant:"caption",color:"textSecondary",sx:{mb:1},children:(0,E.GP)(new Date(e.timestamp),"PPp")}),e.chips&&(0,L.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})})},e.id)}):(0,L.jsx)(b.A,{in:!0,timeout:300,children:(0,L.jsx)(v.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,L.jsxs)(w.A,{sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-4px)",transition:"all 0.3s ease"},position:"relative",overflow:"visible"},children:[r&&(0,L.jsx)($.A,{title:"Highest Score",children:(0,L.jsx)(G.A,{sx:{position:"absolute",top:-10,right:-10,color:"#FFD700",backgroundColor:"white",borderRadius:"50%",padding:"2px",boxShadow:2}})}),(0,L.jsxs)(l.A,{sx:{bgcolor:t,color:"white",p:2,display:"flex",alignItems:"center"},children:[(0,L.jsx)(i,{sx:{mr:1}}),(0,L.jsx)(a.A,{variant:"h6",sx:{fontWeight:"medium",flexGrow:1},children:e.title})]}),(0,L.jsxs)(S.A,{sx:{flexGrow:1,pt:2},children:[(0,L.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,L.jsx)(N.A,{sx:{fontSize:"0.9rem",mr:1,color:"text.secondary"}}),(0,L.jsx)(a.A,{variant:"body2",color:"textSecondary",children:(0,E.GP)(new Date(e.timestamp),"PPp")})]}),(0,L.jsx)(D.A,{sx:{my:1}}),(0,L.jsxs)(l.A,{sx:{mt:2},children:[(0,L.jsxs)(a.A,{variant:"body1",sx:{fontWeight:"bold",display:"flex",alignItems:"center",color:r?k.palette.success.main:"inherit"},children:[(0,L.jsx)(R.A,{sx:{mr:.5,fontSize:"1.1rem"}}),"Score: ",e.score||"N/A","%"]}),e.chips&&(0,L.jsx)(l.A,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1},children:e.chips.map((e=>(0,L.jsx)(C.A,{label:e,size:"small",sx:{backgroundColor:`${t}20`,color:t}},e)))})]})]})]})},e.id)})})(e)))})]}):(0,L.jsx)(I.A,{severity:"info",variant:"outlined",sx:{p:3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,L.jsx)(a.A,{children:"No visual learning activities found. Start practicing to see your progress!"})})})]})},ne=(0,x.Ay)(s.A)((e=>{let{theme:i}=e;return{minHeight:60,textTransform:"none",fontSize:"1rem",fontWeight:500,"&.Mui-selected":{color:i.palette.primary.main}}})),ae=()=>{const[e,i]=(0,r.useState)(0),{currentUser:t}=(0,m.As)(),s=(0,h.Zp)(),[x,y]=(0,r.useState)({textual:[],audio:[],visual:[]});(0,r.useEffect)((()=>{if(!t)return;const e=(0,p.C3)(),i=(0,p.KR)(e,`users/${t.uid}/activities`),r=(0,p.Zy)(i,(e=>{if(e.exists()){const i=e.val(),t={textual:[],audio:[],visual:[]};Object.entries(i).forEach((e=>{let[i,r]=e;const s={id:i,...r};"textual"===r.category?t.textual.push(s):"audio"===r.category?t.audio.push(s):"visual"===r.category&&t.visual.push(s)})),Object.keys(t).forEach((e=>{t[e].sort(((e,i)=>i.timestamp-e.timestamp))})),y(t)}}));return()=>r()}),[t]);return(0,L.jsxs)(o.A,{maxWidth:"lg",sx:{py:4},children:[(0,L.jsxs)(l.A,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[(0,L.jsx)(n.A,{onClick:()=>s("/dashboard"),color:"primary",children:(0,L.jsx)(u.A,{})}),(0,L.jsx)(a.A,{variant:"h4",component:"h1",fontWeight:"bold",children:"Learning History"})]}),(0,L.jsxs)(c.A,{sx:{mb:4},children:[(0,L.jsxs)(d.A,{value:e,onChange:(e,t)=>{i(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider"},children:[(0,L.jsx)(ne,{icon:(0,L.jsx)(A.A,{}),label:"Textual Learning",iconPosition:"start"}),(0,L.jsx)(ne,{icon:(0,L.jsx)(f.A,{}),label:"Audio Practice",iconPosition:"start"}),(0,L.jsx)(ne,{icon:(0,L.jsx)(j.A,{}),label:"Visual Learning",iconPosition:"start"})]}),(0,L.jsxs)(l.A,{sx:{p:3},children:[0===e&&(0,L.jsx)(V,{activities:x.textual}),1===e&&(0,L.jsx)(ee,{activities:x.audio}),2===e&&(0,L.jsx)(le,{activities:x.visual})]})]})]})}}}]);