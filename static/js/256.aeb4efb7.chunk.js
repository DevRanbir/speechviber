"use strict";(self.webpackChunkspeechviber=self.webpackChunkspeechviber||[]).push([[256],{7256:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ce});var s=t(9950),i=t(6491),o=t(6639),n=t(9808),a=t(2053),c=t(226),l=t(2235),d=t(2236),h=t(4142),x=t(8429),j=t(2578),A=t(9830),m=t(3189),u=t(2110),g=t(8945),y=t(4771),b=t(6676),v=t(9943),p=t(2853),f=t(7513),w=t(3679),S=t(6787),k=t(4857),W=t(899),D=t(8089),C=t(704),R=t(4745),P=t(249),$=t(4446),z=t(4195),T=t(3563),F=t(4708),B=t(7503),I=t(41),M=t(9802),H=t(6883),O=t(905),G=t(4864),E=t(6299),_=t(4414);const N=e=>{let{formatDate:r,navigate:t}=e;const{currentUser:o}=(0,A.As)(),n=(0,j.C3)(),c=(0,k.A)(),[l,d]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),[m,u]=(0,s.useState)([]);(0,s.useEffect)((()=>{if(!o)return void t("/login");const e=(0,j.KR)(n,`users/${o.uid}/history/data`);(0,j.Zy)(e,(e=>{try{const r=e.val()||{},t=Object.entries(r).map((e=>{let[r,t]=e;const s=t.activities||{};return Object.entries(s).map((e=>{let[r,t]=e;return{type:t.type||"Practice Session",time:t.date,description:t.description,duration:t.duration,score:t.score||0,id:t.id}}))})).flat();u(t),d(!1)}catch(h){console.error("Error processing history data:",h),x("Failed to load history data"),d(!1)}}),(e=>{console.error("Error fetching history data:",e),x("Failed to load history data"),d(!1)}))}),[o,t]);const g=e=>{switch(e){case"Interview Practice":return(0,_.jsx)(F.A,{color:"primary"});case"Word Power":return(0,_.jsx)(B.A,{color:"secondary"});case"Grammar Check":return(0,_.jsx)(I.A,{color:"success"});case"FastTrack":return(0,_.jsx)(M.A,{color:"warning"});case"Debate":return(0,_.jsx)(H.A,{color:"info"});case"Story":return(0,_.jsx)(O.A,{color:"error"});default:return(0,_.jsx)(M.A,{color:"primary"})}},y=e=>{switch(e){case"Interview Practice":return"Interview Practice";case"Word Power":return"Word Power";case"Grammar Check":return"Grammar Check";case"FastTrack":return"FastTrack Analysis";case"Debate":return"Debate Session";case"Story":return"Story Analysis";case"Tongue Twister":return"Tongue Twister";default:return e}},b=(0,s.useMemo)((()=>{const e=m||[],r=r=>{const t=e.filter((e=>e.type===r));if(!t.length)return 0;const s=t.reduce(((e,r)=>e+(Number(r.score)||0)),0);return Math.round(s/t.length)};return{interview:r("Interview Practice"),wordPower:r("Word Power"),grammar:r("Grammar Check"),fastTrack:r("FastTrack"),debate:r("Debate"),story:r("Story")}}),[m]),v=(0,s.useMemo)((()=>m?m.sort(((e,r)=>new Date(r.time)-new Date(e.time))).slice(0,5).map((e=>({type:e.type,time:e.time,score:e.score,icon:g(e.type)}))):[]),[m]),p=e=>e>=80?c.palette.success.main:e>=60?c.palette.warning.main:c.palette.error.main,f=(0,s.useMemo)((()=>m.length||0),[m]),w=(0,s.useMemo)((()=>{if(!m.length)return 0;const e=m.reduce(((e,r)=>e+(Number(r.score)||0)),0);return Math.round(e/m.length)}),[m]);return(0,_.jsxs)(i.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Your Practice Overview"}),(0,_.jsxs)(W.Ay,{container:!0,spacing:3,children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{sx:{height:"100%",borderRadius:2,boxShadow:c.shadows[3]},children:(0,_.jsxs)(C.A,{children:[(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,_.jsx)(G.A,{color:"primary",sx:{mr:1}}),(0,_.jsx)(a.A,{variant:"h6",children:"Total Practice Sessions"})]}),(0,_.jsx)(a.A,{variant:"h3",align:"center",sx:{my:3,fontWeight:"bold"},children:f})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{sx:{height:"100%",borderRadius:2,boxShadow:c.shadows[3]},children:(0,_.jsxs)(C.A,{children:[(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,_.jsx)(E.A,{color:"secondary",sx:{mr:1}}),(0,_.jsx)(a.A,{variant:"h6",children:"Overall Average Score"})]}),(0,_.jsxs)(a.A,{variant:"h3",align:"center",sx:{my:3,fontWeight:"bold",color:p(w)},children:[w,"%"]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{sx:{height:"100%",borderRadius:2,boxShadow:c.shadows[3]},children:(0,_.jsxs)(C.A,{children:[(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,_.jsx)(O.A,{color:"info",sx:{mr:1}}),(0,_.jsx)(a.A,{variant:"h6",children:"Most Recent Activity"})]}),v.length>0?(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",my:3},children:[(0,_.jsx)(a.A,{variant:"body1",sx:{fontWeight:"medium"},children:y(v[0].type)}),(0,_.jsxs)(a.A,{variant:"body2",color:"textSecondary",sx:{ml:1},children:["(",r(v[0].time),")"]})]}):(0,_.jsx)(a.A,{variant:"body1",align:"center",sx:{my:3},children:"No recent activity"})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,children:(0,_.jsx)(D.A,{sx:{borderRadius:2,boxShadow:c.shadows[3]},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Scores by Practice Type"}),(0,_.jsx)(R.A,{sx:{mb:2}}),(0,_.jsxs)(W.Ay,{container:!0,spacing:2,children:[(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(F.A,{color:"primary",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"Interview"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.interview)},children:[b.interview,"%"]})]})}),(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(B.A,{color:"secondary",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"Word Power"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.wordPower)},children:[b.wordPower,"%"]})]})}),(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(I.A,{color:"success",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"Grammar"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.grammar)},children:[b.grammar,"%"]})]})}),(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(M.A,{color:"warning",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"FastTrack"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.fastTrack)},children:[b.fastTrack,"%"]})]})}),(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(H.A,{color:"info",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"Debate"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.debate)},children:[b.debate,"%"]})]})}),(0,_.jsx)(W.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,_.jsxs)(i.A,{sx:{p:2,textAlign:"center",borderRadius:2,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(O.A,{color:"error",sx:{fontSize:40,mb:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",children:"Story"}),(0,_.jsxs)(a.A,{variant:"h5",sx:{fontWeight:"bold",color:p(b.story)},children:[b.story,"%"]})]})})]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,children:(0,_.jsx)(D.A,{sx:{borderRadius:2,boxShadow:c.shadows[3]},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Recent Activities"}),(0,_.jsx)(R.A,{sx:{mb:2}}),v.length>0?(0,_.jsx)(P.A,{children:v.map(((e,t)=>(0,_.jsxs)($.Ay,{sx:{mb:1,borderRadius:1,bgcolor:c.palette.background.paper,boxShadow:c.shadows[1]},children:[(0,_.jsx)(z.A,{children:e.icon}),(0,_.jsx)(T.A,{primary:y(e.type),secondary:r(e.time)}),(0,_.jsx)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:"50%",bgcolor:p(e.score),color:"#fff",fontWeight:"bold"},children:e.score})]},t)))}):(0,_.jsx)(a.A,{variant:"body1",align:"center",sx:{my:3},children:"No recent activities found"})]})})})]})]})};var Q=t(1320),K=t(5769),Y=t(9780),Z=t(9213),q=t(1671),U=t(4075),J=t(5277),L=t(3016),V=t(7074);const X=e=>{let{mcqChallenges:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===r.length?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(u.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No Interview Practice History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't completed any interview practice sessions yet. Start practicing to build your history!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/practice"),size:"large",children:"Start Practicing"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Practices"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Score"}),(0,_.jsxs)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.score),0)/r.length),children:[Math.round(r.reduce(((e,r)=>e+r.score),0)/r.length),"%"]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Questions"}),(0,_.jsx)(a.A,{variant:"h3",color:"info.main",children:r.reduce(((e,r)=>e+r.attemptedQuestions),0)})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Interview Practice Sessions"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Job Role"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Difficulty"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Questions"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Score"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(V.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),e.jobRole]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.difficulty||"N/A",size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.attemptedQuestions,size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.score}%`,size:"small",sx:{bgcolor:s(e.score),color:"white",fontWeight:"bold"}})})]},e.id)))})]})})]})]})})},ee=e=>{let{wordPowerGames:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===r.length?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(g.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No Word Power History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't completed any Word Power games yet. Start playing to build your vocabulary!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/word-power"),size:"large",children:"Play Word Power"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Games"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Score"}),(0,_.jsx)(a.A,{variant:"h3",color:"info.main",children:Math.round(r.reduce(((e,r)=>e+r.score),0)/r.length)})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Questions"}),(0,_.jsx)(a.A,{variant:"h3",color:"info.main",children:r.reduce(((e,r)=>e+r.attemptedQuestions),0)})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Word Power Game Sessions"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Difficulty"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Questions"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Score"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.difficulty}/10`,size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.attemptedQuestions,size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.score,size:"small",sx:{bgcolor:"info.main",color:"white",fontWeight:"bold"}})})]},e.id)))})]})})]})]})})},re=e=>{let{grammarCheckHistory:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===r.length?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(y.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No Grammar Check History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't used the grammar checker yet. Start checking your grammar to improve your writing!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/grammar-check"),size:"large",children:"Use Grammar Check"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Checks"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Grammar Score"}),(0,_.jsx)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.grammarScore),0)/r.length),children:Math.round(r.reduce(((e,r)=>e+r.grammarScore),0)/r.length)})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Structure Score"}),(0,_.jsx)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.structureScore),0)/r.length),children:Math.round(r.reduce(((e,r)=>e+r.structureScore),0)/r.length)})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Grammar Check History"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Grammar Score"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Structure Score"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Punctuation Score"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.grammarScore}/100`,size:"small",sx:{bgcolor:s(e.grammarScore),color:"white",fontWeight:"bold"}})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.structureScore}/100`,size:"small",sx:{bgcolor:s(e.structureScore),color:"white",fontWeight:"bold"}})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.punctuationScore}/100`,size:"small",sx:{bgcolor:s(e.punctuationScore),color:"white",fontWeight:"bold"}})})]},e.id)))})]})})]})]})})},te=e=>{let{fastTrackHistory:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===r.length?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(b.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No FastTrack Analysis History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't completed any FastTrack Analysis sessions yet. Start practicing to improve your speaking skills!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/analysis"),size:"large",children:"Start FastTrack Analysis"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Sessions"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Score"}),(0,_.jsxs)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.averageScore),0)/r.length),children:[Math.round(r.reduce(((e,r)=>e+r.averageScore),0)/r.length),"%"]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Highest Score"}),(0,_.jsxs)(a.A,{variant:"h3",color:"success.main",children:[Math.max(...r.map((e=>e.averageScore))),"%"]})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"FastTrack Analysis Sessions"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Average Score"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Questions"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.averageScore}%`,size:"small",sx:{bgcolor:s(e.averageScore),color:"white",fontWeight:"bold"}})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.questionScores?e.questionScores.length:0,size:"small",color:"primary",variant:"outlined"})})]},e.id)))})]})})]})]})})};var se=t(1940);const ie=e=>{let{debateHistory:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===r.length?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(p.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No Debate History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't participated in any debates yet. Start debating to improve your persuasive skills!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/debate"),size:"large",children:"Start Debating"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Debates"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Score"}),(0,_.jsxs)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.score),0)/r.length),children:[Math.round(r.reduce(((e,r)=>e+r.score),0)/r.length),"%"]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Win Rate"}),(0,_.jsxs)(a.A,{variant:"h3",color:"success.main",children:[Math.round(r.filter((e=>"victory"===e.result)).length/r.length*100),"%"]})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Debate Sessions"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Topic"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Position"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Difficulty"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Score"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Result"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{noWrap:!0,sx:{maxWidth:200},children:e.topic})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.position,size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.difficulty,size:"small",color:"easy"===e.difficulty?"success":"medium"===e.difficulty?"warning":"error",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.score}%`,size:"small",sx:{bgcolor:s(e.score),color:"white",fontWeight:"bold"}})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{icon:(0,_.jsx)(se.A,{}),label:e.result,size:"small",color:"victory"===e.result?"success":"error",sx:{fontWeight:"bold"}})})]},e.id)))})]})})]})]})})},oe=()=>{const[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),{currentUser:c}=(0,A.As)(),d=(0,k.A)();(0,s.useEffect)((()=>{(async()=>{if(c)try{const e=(0,j.C3)(),t=(0,j.KR)(e,`users/${c.uid}/storymode/data`);(0,j.Zy)(t,(e=>{const t=e.val();if(t){const e=Object.entries(t).map((e=>{let[r,t]=e;return{id:r,...t}})).sort(((e,r)=>new Date(r.time)-new Date(e.time)));r(e)}else r([]);n(!1)}))}catch(e){console.error("Error fetching story data:",e),n(!1)}})()}),[c]);const h=e=>e>=80?d.palette.success.main:e>=60?d.palette.warning.main:d.palette.error.main,x=e=>{const r=new Date(e),t=r.toLocaleString("default",{month:"short"}),s=r.getDate(),i=r.getFullYear(),o=r.getHours();return`${t} ${s}, ${i} \u2022 ${o%12||12}:${r.getMinutes().toString().padStart(2,"0")} ${o>=12?"PM":"AM"}`};return t?(0,_.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",p:5},children:(0,_.jsx)(o.A,{})}):0===e.length?(0,_.jsxs)(l.A,{sx:{p:4,textAlign:"center"},children:[(0,_.jsx)(w.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h6",color:"textSecondary",children:"No story analysis history found"}),(0,_.jsx)(a.A,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"Try analyzing a story in the Story Analyzer mode to see your results here."})]}):(0,_.jsxs)(i.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{mb:3},children:"Your Story Analysis History"}),(0,_.jsx)(W.Ay,{container:!0,spacing:3,children:e.map((e=>(0,_.jsx)(W.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,_.jsx)(D.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:2,transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:d.shadows[8]}},children:(0,_.jsxs)(C.A,{sx:{flexGrow:1},children:[(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,_.jsx)(w.A,{color:"primary",sx:{mr:1}}),(0,_.jsx)(a.A,{variant:"subtitle1",sx:{fontWeight:600},children:"Story Analysis"})]}),(0,_.jsx)(R.A,{sx:{mb:2}}),(0,_.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)(a.A,{variant:"body2",color:"textSecondary",children:x(e.time)}),(0,_.jsx)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:60,height:60,borderRadius:"50%",border:`3px solid ${h(e.score)}`,backgroundColor:d.palette.background.paper},children:(0,_.jsxs)(a.A,{variant:"h6",sx:{fontWeight:"bold",color:h(e.score)},children:[e.score,"%"]})})]})]})})},e.id)))})]})};var ne=t(9092);const ae=e=>{let{tongueTwisterHistory:r,formatDate:t,getScoreColor:s,navigate:o}=e;return(0,_.jsx)(_.Fragment,{children:0===(null===r||void 0===r?void 0:r.length)?(0,_.jsxs)(l.A,{elevation:3,sx:{p:5,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:[(0,_.jsx)(ne.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"No Tongue Twister History Found"}),(0,_.jsx)(a.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"You haven't practiced any tongue twisters yet. Start practicing to improve your pronunciation!"}),(0,_.jsx)(c.A,{variant:"contained",onClick:()=>o("/tongue-twister"),size:"large",children:"Start Practice"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(W.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Total Sessions"}),(0,_.jsx)(a.A,{variant:"h3",color:"primary.main",children:r.length})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Average Score"}),(0,_.jsxs)(a.A,{variant:"h3",color:s(r.reduce(((e,r)=>e+r.score),0)/r.length),children:[Math.round(r.reduce(((e,r)=>e+r.score),0)/r.length),"%"]})]})})}),(0,_.jsx)(W.Ay,{item:!0,xs:12,md:4,children:(0,_.jsx)(D.A,{elevation:3,sx:{borderRadius:2,height:"100%"},children:(0,_.jsxs)(C.A,{children:[(0,_.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Correct Answers"}),(0,_.jsx)(a.A,{variant:"h3",color:"success.main",children:r.reduce(((e,r)=>e+r.correctCount),0)})]})})})]}),(0,_.jsxs)(l.A,{elevation:3,sx:{borderRadius:2,overflow:"hidden"},children:[(0,_.jsx)(i.A,{sx:{p:3,bgcolor:"background.paper"},children:(0,_.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Practice Sessions"})}),(0,_.jsx)(R.A,{}),(0,_.jsx)(Q.A,{children:(0,_.jsxs)(K.A,{children:[(0,_.jsx)(Y.A,{children:(0,_.jsxs)(Z.A,{children:[(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Date"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Question Type"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Correct/Total"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Score"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(a.A,{fontWeight:"bold",children:"Accuracy"})})]})}),(0,_.jsx)(U.A,{children:r.map((e=>(0,_.jsxs)(Z.A,{hover:!0,children:[(0,_.jsx)(q.A,{children:(0,_.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(L.A,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t(e.time)]})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:e.questionType,size:"small",color:"primary",variant:"outlined"})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(q.A,{children:`${e.correctCount}/${e.correctCount+e.incorrectCount}`})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.score}%`,size:"small",sx:{bgcolor:s(e.score),color:"white",fontWeight:"bold"}})}),(0,_.jsx)(q.A,{children:(0,_.jsx)(J.A,{label:`${e.accuracy}%`,size:"small",color:(e.accuracy>=80||e.accuracy,"success"),sx:{fontWeight:"bold"}})})]},e.id)))})]})})]})]})})},ce=()=>{(0,f.M)();const e=(0,x.Zp)(),{currentUser:r}=(0,A.As)(),[t,k]=(0,s.useState)([]),[W,D]=(0,s.useState)([]),[C,R]=(0,s.useState)([]),[P,$]=(0,s.useState)([]),[z,T]=(0,s.useState)([]),[F,B]=(0,s.useState)(!0),[I,M]=(0,s.useState)(null),[H,O]=(0,s.useState)(0),[G,E]=(0,s.useState)([]),[Q,K]=(0,s.useState)([]);(0,s.useEffect)((()=>{(async()=>{if(r&&t&&W&&C&&P&&z&&G&&Q)try{const e=(0,j.C3)(),s=[...t.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`interview_${e.time}_${e.score}`,type:"Interview Practice",date:e.time,score:e.score,description:`Completed an interview practice session with score: ${e.score}%`,duration:"15 minutes"}))),...Q.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`tonguetwister_${e.time}_${e.score}`,type:"Tongue Twister",date:e.time,score:e.score,description:`Completed a tongue twister practice with score: ${e.score}%`,duration:"10 minutes"}))),...W.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`wordpower_${e.time}_${e.score}`,type:"Word Power",date:e.time,score:e.score,description:`Completed a word power game with score: ${e.score}%`,duration:"10 minutes"}))),...C.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`grammar_${e.time}_${e.score}`,type:"Grammar Check",date:e.time,score:e.score,description:`Completed a grammar check session with score: ${e.score}%`,duration:"12 minutes"}))),...P.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`fasttrack_${e.time}_${e.score}`,type:"FastTrack Analysis",date:e.time,score:e.score,description:`Completed a fast track analysis with score: ${e.score}%`,duration:"5 minutes"}))),...z.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`debate_${e.time}_${e.score}`,type:"Debate Session",date:e.time,score:e.score,description:"Participated in a debate session",duration:"20 minutes"}))),...G.filter((e=>(null===e||void 0===e?void 0:e.score)&&(null===e||void 0===e?void 0:e.time))).map((e=>({id:`story_${e.time}_${e.score}`,type:"Story Analysis",date:e.time,score:e.score,description:`Analyzed a story with score: ${e.score}%`,duration:"15 minutes"})))],i=(0,j.KR)(e,`users/${r.uid}/history/data`),o=(await(0,j.Jt)(i)).val()||{},n=new Set(Object.values(o).flatMap((e=>e.activities)).map((e=>e.id))),a=s.filter((e=>!n.has(e.id)));if(a.length>0){a.sort(((e,r)=>new Date(r.date)-new Date(e.date)));const t=a.slice(0,10);await(0,j.hZ)((0,j.KR)(e,`users/${r.uid}/history/data/${Date.now()}`),{time:(new Date).toISOString(),activities:t}),console.log(`Saved ${t.length} new activities`)}else console.log("No new activities to save")}catch(I){console.error("Error saving recent activities:",I)}})()}),[r,t,W,C,P,z,G,Q]),(0,s.useEffect)((()=>{(async()=>{try{const e=(0,j.C3)(),t=(0,j.KR)(e,`users/${r.uid}/tongue-twister`);(0,j.Zy)(t,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;const s=Object.values(t)[0];return{id:r,...s,time:s.time||(new Date).toISOString()}})).filter(((e,r,t)=>r===t.findIndex((r=>r.time===e.time))));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),K(e)}else K([])}));const s=(0,j.KR)(e,`users/${r.uid}/mcq-challenges`);(0,j.Zy)(s,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t[Object.keys(t)[0]]}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),k(e)}else k([])}),(e=>{console.error("Error fetching MCQ challenges:",e),M("Failed to load your MCQ history. Please try again later.")}));const i=(0,j.KR)(e,`users/${r.uid}/word-power`);(0,j.Zy)(i,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t[Object.keys(t)[0]]}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),D(e)}else D([])}),(e=>{console.error("Error fetching Word Power games:",e),M("Failed to load your Word Power history. Please try again later.")}));const o=(0,j.KR)(e,`users/${r.uid}/grammar-check`);(0,j.Zy)(o,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t[Object.keys(t)[0]]}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),R(e)}else R([])}),(e=>{console.error("Error fetching grammar check history:",e),M("Failed to load your grammar check history. Please try again later.")}));const n=(0,j.KR)(e,`users/${r.uid}/fasttractanalysis`);(0,j.Zy)(n,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t[Object.keys(t)[0]]}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),$(e)}else $([])}),(e=>{console.error("Error fetching FastTrack analysis history:",e),M("Failed to load your FastTrack analysis history. Please try again later.")}));const a=(0,j.KR)(e,`users/${r.uid}/storymode/data`);(0,j.Zy)(a,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),E(e)}else E([]);B(!1)}),(e=>{console.error("Error fetching story analysis history:",e),M("Failed to load your story analysis history. Please try again later."),B(!1)}));const c=(0,j.KR)(e,`users/${r.uid}/debate/data`);(0,j.Zy)(c,(e=>{const r=e.val();if(r){const e=Object.entries(r).map((e=>{let[r,t]=e;return{id:r,...t&&"object"===typeof t&&Object.values(t)[0]?Object.values(t)[0]:t}}));e.sort(((e,r)=>new Date(r.time)-new Date(e.time))),T(e)}else T([]);B(!1)}),(e=>{console.error("Error fetching debate history:",e),M("Failed to load your debate history. Please try again later."),B(!1)}))}catch(I){console.error("Error setting up database listener:",I),M("Failed to connect to the database. Please check your connection."),B(!1)}})()}),[r,e]);const Y=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Z=e=>e>=80?"success.main":e>=60?"warning.main":"error.main";return F?(0,_.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,_.jsx)(o.A,{})}):(0,_.jsx)(n.A,{maxWidth:"lg",sx:{py:4},children:(0,_.jsxs)(v.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,_.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,_.jsx)(a.A,{variant:"h4",fontWeight:"bold",children:"Your Practice History"}),(0,_.jsx)(c.A,{startIcon:(0,_.jsx)(m.A,{}),onClick:()=>e("/dashboard"),variant:"outlined",children:"Back to Dashboard"})]}),I&&(0,_.jsx)(l.A,{elevation:3,sx:{p:3,mb:4,bgcolor:"error.light",color:"error.contrastText"},children:(0,_.jsx)(a.A,{children:I})}),(0,_.jsxs)(d.A,{value:H,onChange:(e,r)=>{O(r)},sx:{mb:3},variant:"scrollable",scrollButtons:"auto",children:[(0,_.jsx)(h.A,{label:"Dashboard",icon:(0,_.jsx)(S.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Interview Practice",icon:(0,_.jsx)(u.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Word Power",icon:(0,_.jsx)(g.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Grammar Check",icon:(0,_.jsx)(y.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"FastTrack Analysis",icon:(0,_.jsx)(b.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Debate Sessions",icon:(0,_.jsx)(p.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Story Analysis",icon:(0,_.jsx)(w.A,{}),iconPosition:"start"}),(0,_.jsx)(h.A,{label:"Tongue Twisters",icon:(0,_.jsx)(ne.A,{}),iconPosition:"start"})]}),0===H&&(0,_.jsx)(N,{mcqChallenges:t,wordPowerGames:W,grammarCheckHistory:C,fastTrackHistory:P,debateHistory:z,storyData:G,formatDate:Y,navigate:e}),1===H&&(0,_.jsx)(X,{mcqChallenges:t,formatDate:Y,getScoreColor:Z,navigate:e}),2===H&&(0,_.jsx)(ee,{wordPowerGames:W,formatDate:Y,getScoreColor:Z,navigate:e}),3===H&&(0,_.jsx)(re,{grammarCheckHistory:C,formatDate:Y,getScoreColor:Z,navigate:e}),4===H&&(0,_.jsx)(te,{fastTrackHistory:P,formatDate:Y,getScoreColor:Z,navigate:e}),5===H&&(0,_.jsx)(ie,{debateHistory:z,formatDate:Y,getScoreColor:Z,navigate:e}),6===H&&(0,_.jsx)(oe,{storyData:G,formatDate:Y,getScoreColor:Z,navigate:e}),7===H&&(0,_.jsx)(ae,{tongueTwisterHistory:Q,formatDate:Y,getScoreColor:Z,navigate:e})]})})}}}]);